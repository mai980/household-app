# 要件定義書 — カップル家計簿

## 1. 概要
カップル（2人）間のお金のやり取り（家計簿・割り勘・立て替え）を管理し、  
清算額を即座に確認できる Web アプリケーション。

## 2. 機能要件

### 2.1 ユーザー管理
| 項目 | 内容 |
|------|------|
| ユーザー数 | 固定 2 名 (UserA, UserB) |
| 認証 | なし（プルダウン選択方式） |

### 2.2 支出記録 (Transaction)
| フィールド | 型 | 必須 | 説明 |
|------------|----|------|------|
| 日付 | Date | ✔ | デフォルト: 当日 |
| 品目 | String | ✔ | 支出タイトル |
| 金額 | Integer | ✔ | 1 円以上 |
| 支払った人 | String | ✔ | UserA or UserB |
| カテゴリ | String | ✔ | 食費, 光熱費, 旅行, その他 等 |
| 支払い種別 | String | ✔ | 自分用 / 相手用 / 割り勘 |

**支払い種別の定義:**
- **自分用**: 清算対象外
- **相手用**: 相手が全額支払うべき（相手への貸し）
- **割り勘**: 2 人で等分（相手が半額支払うべき）

### 2.3 清算ロジック
```
balance = (AがBのために払った額 + Aの割り勘半額)
        - (BがAのために払った額 + Bの割り勘半額)
```
- `balance > 0` → B が A に balance 円支払う
- `balance < 0` → A が B に |balance| 円支払う
- `balance == 0` → 清算不要

### 2.4 CRUD 操作
- 支出の新規登録 / 編集 / 削除
- 全履歴の一覧表示（ページネーション付き）

## 3. 非機能要件

| 項目 | 内容 |
|------|------|
| レスポンシブ | モバイルファースト (Bootstrap 5) |
| パフォーマンス | 軽量フレームワーク (Flask) |
| データ永続化 | SQLite ファイル |
| デプロイ対応 | Render.com / Heroku (Gunicorn) |

## 4. 技術スタック
- Python 3.9+, Flask, SQLAlchemy
- HTML5, CSS3, Bootstrap 5 (CDN)
- SQLite, Gunicorn
